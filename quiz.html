<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Genre Matchmaker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f7f7f7;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .selected-option {
            border-color: #4f46e5;
            background-color: #eef2ff;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
            transform: scale(1.02);
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body onload="initApp()">

    <header class="bg-white shadow-lg sticky top-0 z-10">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-20">
            <div class="flex items-center">
                <img src="https://www.gyanshree.in/site/assets/images/gyan-logo.jpg" onerror="this.onerror=null;this.src='https://placehold.co/48x48/6366f1/ffffff?text=GS'" alt="Gyanshree School Logo" class="w-12 h-12 object-contain rounded-lg">
                <span class="ml-3 text-xl font-bold text-gray-800 hidden sm:block">Genre Matchmaker</span>
            </div>

            <div class="flex items-center space-x-4 sm:space-x-6">
                <a href="index.html" class="flex items-center text-gray-600 hover:text-indigo-600 font-medium transition-colors p-2 rounded-md hover:bg-gray-100">
                    <i data-lucide="home" class="w-5 h-5 mr-1"></i>
                    <span>Home</span>
                </a>
            </div>
        </nav>
    </header>

    <main class="flex-grow py-8 sm:py-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl">
            <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl border-t-8 border-indigo-600">
                <div class="text-center mb-6">
                    <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800 mt-2">Find Your Next Read</h1>
                    <p class="text-lg text-gray-600 mt-2">Answer a few questions to match with a genre you'll love!</p>
                </div>
                
                <div id="quiz-container" class="space-y-6">
                    <!-- Updated: Centered start screen content and button -->
                    <div id="start-screen" class="text-center p-8 bg-indigo-50 rounded-lg border border-indigo-200 flex flex-col items-center">
                        <i data-lucide="book-open-check" class="w-12 h-12 text-indigo-600 mb-4"></i>
                        <h2 class="text-2xl font-semibold text-gray-800 mb-4">Ready to Explore?</h2>
                        <p class="text-gray-600 mb-6">This quick quiz will help suggest a genre based on your interests and preferences.</p>
                        <!-- Updated: Button text is now "Start Quiz" and it is centered via flex-col items-center -->
                        <button id="start-button" class="w-full sm:w-auto flex justify-center items-center py-3 px-10 border border-transparent rounded-lg shadow-lg text-lg font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-500/50 transition-all transform hover:scale-[1.03]">
                            <i data-lucide="play" class="w-6 h-6 mr-2"></i>
                            Start Quiz
                        </button>
                    </div>

                    <div id="question-screen" class="hidden">
                        <div class="mb-6">
                            <p class="text-sm font-medium text-gray-600 mb-1">Progress: <span id="progress-text">0/0</span></p>
                            <div class="w-full bg-gray-200 rounded-full h-2.5">
                                <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full progress-bar-fill" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="p-6 sm:p-8 border border-gray-200 rounded-xl bg-white shadow-md">
                            <p id="question-text" class="text-xl font-semibold text-gray-800 mb-6"></p>
                            <div id="options-container" class="space-y-4"></div>
                        </div>

                        <div class="flex justify-between mt-6 space-x-4">
                            <button id="prev-button" class="flex items-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-base font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors" disabled>
                                <i data-lucide="arrow-left" class="w-5 h-5 mr-2"></i>
                                Previous
                            </button>
                            <button id="next-button" class="flex items-center py-2 px-6 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors" disabled>
                                Next
                                <i data-lucide="arrow-right" class="w-5 h-5 ml-2"></i>
                            </button>
                        </div>
                    </div>

                    <div id="results-screen" class="hidden text-center p-8 bg-green-50 rounded-xl border border-green-300">
                        <i data-lucide="sparkles" class="w-12 h-12 mx-auto text-green-600 mb-4"></i>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">Your Genre Match!</h2>
                        <p class="text-xl font-semibold text-green-700 mb-6">You're matched with: <span id="result-genre" class="text-3xl font-extrabold block mt-2"></span></p>
                        
                        <div class="p-4 bg-white rounded-lg border border-gray-200 mb-6 text-left">
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">Why this genre?</h3>
                            <p id="result-description" class="text-gray-600"></p>
                        </div>

                        <button id="restart-button" class="w-full sm:w-auto flex justify-center items-center mx-auto py-3 px-8 border border-transparent rounded-lg shadow-lg text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-500/50 transition-all transform hover:scale-[1.03]">
                            <i data-lucide="refresh-cw" class="w-6 h-6 mr-2"></i>
                            Try Again!
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gray-800 text-gray-400 py-4 mt-auto">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-sm">&copy; 2025 Gyanshree School, Noida. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        const QUESTIONS = [
            {
                text: "What kind of setting most excites you?",
                options: [
                    { text: "A distant galaxy or dystopian future", score: { 'Sci-Fi': 2, 'Fantasy': 1 } },
                    { text: "A detailed historical period or classic location", score: { 'Historical Fiction': 2, 'Classics': 1 } },
                    { text: "A modern city with a dark, twisty mystery", score: { 'Thriller': 2, 'Mystery': 2 } },
                    { text: "A world full of magic, mythical creatures, or unique civilizations", score: { 'Fantasy': 2, 'Adventure': 1 } },
                ]
            },
            {
                text: "What kind of challenge or conflict do you prefer?",
                options: [
                    { text: "Solving a crime or unraveling a complex puzzle", score: { 'Mystery': 2, 'Thriller': 1 } },
                    { text: "A quest to save a world or defeat an ultimate evil", score: { 'Fantasy': 2, 'Adventure': 1 } },
                    { text: "Facing inner turmoil or surviving a moral dilemma", score: { 'Literary Fiction': 2, 'Classics': 1 } },
                    { text: "An intense race against time or a terrifying opponent", score: { 'Thriller': 2, 'Sci-Fi': 1 } },
                ]
            },
            {
                text: "Which type of protagonist do you find most interesting?",
                options: [
                    { text: "An ordinary person thrown into extraordinary circumstances", score: { 'Adventure': 2, 'Sci-Fi': 1 } },
                    { text: "A detective or investigator with a dark past", score: { 'Mystery': 2, 'Thriller': 1 } },
                    { text: "A royal, warrior, or mage with special powers", score: { 'Fantasy': 2 } },
                    { text: "A deeply flawed character exploring life and relationships", score: { 'Literary Fiction': 2, 'Romance': 1 } },
                ]
            },
            {
                text: "What pace do you prefer in a story?",
                options: [
                    { text: "Fast-paced, with cliffhangers and constant action", score: { 'Thriller': 2, 'Adventure': 1 } },
                    { text: "Moderate, allowing time for character development and world-building", score: { 'Fantasy': 1, 'Sci-Fi': 1, 'Historical Fiction': 1 } },
                    { text: "Slow and thoughtful, focusing heavily on prose and emotion", score: { 'Literary Fiction': 2, 'Classics': 1 } },
                    { text: "A blend of action and investigation, steady build-up to a climax", score: { 'Mystery': 2 } },
                ]
            },
            {
                text: "What makes a satisfying ending for you?",
                options: [
                    { text: "All loose ends are tied up, and the mystery is fully solved", score: { 'Mystery': 2 } },
                    { text: "The main characters achieve their epic goal and change the world", score: { 'Fantasy': 2, 'Sci-Fi': 1 } },
                    { text: "The main characters experience profound emotional growth or change", score: { 'Literary Fiction': 2, 'Classics': 1, 'Romance': 1 } },
                    { text: "A shocking twist that completely redefines everything that happened", score: { 'Thriller': 2 } },
                ]
            },
        ];

        const GENRE_DESCRIPTIONS = {
            'Fantasy': { title: "Fantasy âœ¨", description: "You crave escapism into worlds of magic, myths, and epic quests. You'll love deep lore, complex characters with special abilities, and the classic battle between good and evil." },
            'Thriller': { title: "Thriller ðŸš¨", description: "You love high-stakes, adrenaline-pumping narratives where time is running out. You enjoy psychological suspense, intense action, and plots with constant twists." },
            'Mystery': { title: "Mystery ðŸ”", description: "You enjoy solving puzzles and uncovering secrets. You appreciate careful plotting, witty detectives, and the satisfaction of seeing clues fall into place." },
            'Sci-Fi': { title: "Science Fiction ðŸš€", description: "You are fascinated by the future, technology, and 'what-if' scenarios. You enjoy exploring complex themes like AI, space travel, or dystopian societies." },
            'Literary Fiction': { title: "Literary Fiction ðŸ“š", description: "You value beautiful writing, deep character studies, and emotional complexity over plot speed. You enjoy stories that explore the human condition." },
            'Historical Fiction': { title: "Historical Fiction ðŸ•°ï¸", description: "You love immersing yourself in the sights, sounds, and social norms of the past. You enjoy detailed world-building based on real history." },
            'Adventure': { title: "Adventure ðŸ§­", description: "You seek excitement, daring expeditions, and journeys into the unknown. Your perfect book features exploration and high-stakes survival." },
            'Classics': { title: "Classics ðŸ›ï¸", description: "You appreciate timeless themes, profound language, and stories that have shaped literature. You enjoy works that explore enduring human spirit." },
            'Romance': { title: "Romance â¤ï¸", description: "You look for engaging stories centered around the development of a romantic relationship. You enjoy emotional investment and satisfying conclusions." }
        };

        let currentQuestionIndex = 0;
        let selectedAnswers = []; 
        let genreScores = {};
        
        const startScreen = document.getElementById('start-screen');
        const questionScreen = document.getElementById('question-screen');
        const resultsScreen = document.getElementById('results-screen');
        const startButton = document.getElementById('start-button');
        const nextButton = document.getElementById('next-button');
        const prevButton = document.getElementById('prev-button');
        const restartButton = document.getElementById('restart-button');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        function initApp() {
            startButton.onclick = startQuiz;
            nextButton.onclick = handleNext;
            prevButton.onclick = handlePrev;
            restartButton.onclick = startQuiz;
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            selectedAnswers = Array(QUESTIONS.length).fill(null);
            genreScores = {};
            startScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            questionScreen.classList.remove('hidden');
            renderQuestion();
        }

        function renderQuestion() {
            const q = QUESTIONS[currentQuestionIndex];
            questionText.textContent = `Q${currentQuestionIndex + 1}: ${q.text}`;
            optionsContainer.innerHTML = '';
            
            q.options.forEach((option, index) => {
                const isSelected = selectedAnswers[currentQuestionIndex] === index;
                const button = document.createElement('button');
                button.textContent = option.text;
                button.className = `w-full text-left p-4 rounded-lg border-2 border-gray-200 bg-white hover:bg-gray-50 focus:outline-none transition-all ${isSelected ? 'selected-option' : 'shadow-sm'}`;
                button.onclick = () => selectOption(index);
                optionsContainer.appendChild(button);
            });

            updateNavigation();
            updateProgress();
        }
        
        function selectOption(index) {
            selectedAnswers[currentQuestionIndex] = index;
            renderQuestion(); 
            updateNavigation(); 
        }

        function updateNavigation() {
            prevButton.disabled = currentQuestionIndex === 0;
            nextButton.disabled = selectedAnswers[currentQuestionIndex] === null;

            if (currentQuestionIndex === QUESTIONS.length - 1) {
                nextButton.innerHTML = `See Results <i data-lucide="gift" class="w-5 h-5 ml-2"></i>`;
                nextButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                nextButton.classList.add('bg-green-600', 'hover:bg-green-700');
            } else {
                nextButton.innerHTML = `Next <i data-lucide="arrow-right" class="w-5 h-5 ml-2"></i>`;
                nextButton.classList.remove('bg-green-600', 'hover:bg-green-700');
                nextButton.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
            }
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function updateProgress() {
            const totalQuestions = QUESTIONS.length;
            const completedQuestions = selectedAnswers.filter(a => a !== null).length;
            progressText.textContent = `${completedQuestions}/${totalQuestions}`;
            const progressPercentage = (currentQuestionIndex / totalQuestions) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }

        function handleNext() {
            if (selectedAnswers[currentQuestionIndex] === null) return;
            if (currentQuestionIndex < QUESTIONS.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                calculateResults();
            }
        }

        function handlePrev() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function calculateResults() {
            genreScores = {};
            selectedAnswers.forEach((answerIndex, questionIndex) => {
                if (answerIndex !== null) {
                    const optionScores = QUESTIONS[questionIndex].options[answerIndex].score;
                    for (const genre in optionScores) {
                        genreScores[genre] = (genreScores[genre] || 0) + optionScores[genre];
                    }
                }
            });

            let maxScore = -1;
            let bestMatch = 'Literary Fiction';
            for (const genre in genreScores) {
                if (genreScores[genre] > maxScore) {
                    maxScore = genreScores[genre];
                    bestMatch = genre;
                }
            }
            displayResults(bestMatch);
        }

        function displayResults(matchGenre) {
            questionScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            const resultInfo = GENRE_DESCRIPTIONS[matchGenre] || GENRE_DESCRIPTIONS['Literary Fiction'];
            document.getElementById('result-genre').textContent = resultInfo.title;
            document.getElementById('result-description').textContent = resultInfo.description;
            progressBar.style.width = '100%';
        }
        
        window.initApp = initApp;
    </script>
</body>
</html>